2025-06-05 18:18:00,594:API_operations.helpers.JobService:INFO Creating job 153969
2025-06-05 18:18:00,933:API_operations.exports.ForProject:INFO Input Param = {'collection_id': 0, 'project_id': 11577, 'exp_type': <ExportTypeEnum.general_tsv: 'TSV'>, 'use_latin1': False, 'tsv_entities': 'OPASC', 'only_annotations': False, 'split_by': 'sample', 'coma_as_separator': False, 'format_dates_times': True, 'with_images': False, 'with_internal_ids': False, 'with_types_row': False, 'only_first_image': False, 'sum_subtotal': <SummaryExportGroupingEnum.just_by_taxon: ''>, 'pre_mapping': {}, 'formulae': {}, 'out_to_ftp': False}
2025-06-05 18:18:00,934:API_operations.exports.ForProject:INFO Input Param = {'collection_id': 0, 'project_id': 11577, 'exp_type': <ExportTypeEnum.general_tsv: 'TSV'>, 'use_latin1': False, 'tsv_entities': 'OPASC', 'only_annotations': False, 'split_by': 'sample', 'coma_as_separator': False, 'format_dates_times': True, 'with_images': False, 'with_internal_ids': False, 'with_types_row': False, 'only_first_image': False, 'sum_subtotal': <SummaryExportGroupingEnum.just_by_taxon: ''>, 'pre_mapping': {}, 'formulae': {}, 'out_to_ftp': False} project_ids = [11577]
2025-06-05 18:18:00,947:API_operations.exports.ForProject:INFO Execute SQL : select obh.orig_id AS object_id, 
                             obh.latitude AS object_lat, obh.longitude AS object_lon,
                             TO_CHAR(obh.objdate,'YYYY-MM-DD') AS object_date,
                             TO_CHAR(obh.objtime,'HH24:MI:SS') AS object_time,
                             obh.object_link, obh.depth_min AS object_depth_min, obh.depth_max AS object_depth_max,
                         
                CASE obh.classif_qual
                            WHEN 'V' then 'validated'
                            WHEN 'P' then 'predicted'
                            WHEN 'D' then 'dubious'
                            ELSE obh.classif_qual
                         END AS object_annotation_status,
                         usr.name AS object_annotation_person_name, usr.email AS object_annotation_person_email,
                         
                    CASE WHEN obh.classif_qual IN ('V','D') THEN TO_CHAR(obh.classif_date,'YYYY-MM-DD') END AS object_annotation_date,
                  CASE WHEN obh.classif_qual IN ('V','D') THEN TO_CHAR(obh.classif_date,'HH24:MI:SS') END AS object_annotation_time,
                         txo.display_name AS object_annotation_category
                    ,(WITH RECURSIVE rq(id, name, parent_id) 
                   AS (SELECT id, name, parent_id, 1 AS rank 
                         FROM taxonomy 
                        WHERE id = obh.classif_id
                       UNION
                       SELECT txpr.id, txpr.name, txpr.parent_id, rank+1 AS rank 
                         FROM rq 
                         JOIN taxonomy txpr ON txpr.id = rq.parent_id)
                    SELECT string_agg(name,'>') 
                      FROM (SELECT name 
                              FROM rq 
                          ORDER BY rank desc) q) AS object_annotation_hierarchy
, obh.complement_info
 , obf.n01 AS "object_label", obf.n02 AS "object_width", obf.n03 AS "object_height", obf.n04 AS "object_bx", obf.n05 AS "object_by", obf.n06 AS "object_circ.", obf.n07 AS "object_area_exc", obf.n08 AS "object_area", obf.n09 AS "object_%area", obf.n10 AS "object_major", obf.n11 AS "object_minor", obf.n12 AS "object_y", obf.n13 AS "object_x", obf.n14 AS "object_convex_area", obf.n15 AS "object_perim.", obf.n16 AS "object_elongation", obf.n17 AS "object_perimareaexc", obf.n18 AS "object_perimmajor", obf.n19 AS "object_circex", obf.n20 AS "object_angle", obf.n21 AS "object_bounding_box_area", obf.n22 AS "object_eccentricity", obf.n23 AS "object_equivalent_diameter", obf.n24 AS "object_euler_number", obf.n25 AS "object_extent", obf.n26 AS "object_local_centroid_col", obf.n27 AS "object_local_centroid_row", obf.n28 AS "object_solidity", obf.n29 AS "object_meanhue", obf.n30 AS "object_meansaturation", obf.n31 AS "object_meanvalue", obf.n32 AS "object_stdhue", obf.n33 AS "object_stdsaturation", obf.n34 AS "object_stdvalue"
, sam.orig_id AS sample_id, sam.dataportal_descriptor AS sample_dataportal_descriptor , sam.t01 AS "sample_project", sam.t02 AS "sample_ship", sam.t03 AS "sample_operator", sam.t04 AS "sample_sampling_gear", sam.t05 AS "sample_gear_net_opening", sam.t06 AS "sample_uuid"
, prc.orig_id AS process_id , prc.t01 AS "process_pixel", prc.t02 AS "process_source", prc.t03 AS "process_commit", prc.t04 AS "process_datetime", prc.t05 AS "process_uuid", prc.t06 AS "process_1st_operation", prc.t07 AS "process_2nd_operation", prc.t08 AS "process_3rd_operation", prc.t09 AS "process_4th_operation", prc.t10 AS "process_5th_operation", prc.t11 AS "process_6th_operation", prc.t12 AS "process_7th_operation"
, acq.orig_id AS acq_id, acq.instrument AS acq_instrument , acq.t01 AS "acq_instrument_id", acq.t02 AS "acq_celltype", acq.t03 AS "acq_minimum_mesh", acq.t04 AS "acq_maximum_mesh", acq.t05 AS "acq_volume", acq.t06 AS "acq_imaged_volume", acq.t07 AS "acq_magnification", acq.t08 AS "acq_fnumber_objective", acq.t09 AS "acq_camera", acq.t10 AS "acq_nb_frame", acq.t11 AS "acq_software", acq.t12 AS "acq_local_datetime", acq.t13 AS "acq_camera_resolution", acq.t14 AS "acq_camera_iso", acq.t15 AS "acq_camera_shutter_speed", acq.t16 AS "acq_uuid" FROM (select 11577 as projid) prjs
 JOIN samples sam ON sam.projid = prjs.projid
 JOIN acquisitions acq ON acq.acq_sample_id = sam.sampleid
 JOIN process prc ON prc.processid = acq.acquisid
 JOIN obj_head obh ON obh.acquisid = acq.acquisid
 JOIN obj_field obf ON obf.objfid = obh.objid
 LEFT JOIN taxonomy txo ON txo.id = obh.classif_id
 LEFT JOIN users usr ON obh.classif_who = usr.id 
ORDER BY sam.orig_id ASC, obh.objid ASC
2025-06-05 18:18:00,947:API_operations.exports.ForProject:INFO Params : {'projid': '11577'}
2025-06-05 18:18:06,505:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:06,739:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T002D.tsv
2025-06-05 18:18:06,772:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:07,086:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T002S.tsv
2025-06-05 18:18:07,146:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:07,455:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T003D.tsv
2025-06-05 18:18:07,513:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:07,693:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T003S.tsv
2025-06-05 18:18:07,727:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:07,778:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T004D.tsv
2025-06-05 18:18:07,788:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:07,821:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T004S.tsv
2025-06-05 18:18:07,827:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:08,273:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T005D.tsv
2025-06-05 18:18:08,350:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:08,750:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T005S.tsv
2025-06-05 18:18:08,826:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:08,966:API_operations.exports.ForProject:INFO Row 10000 of max 69291
2025-06-05 18:18:09,114:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T007D.tsv
2025-06-05 18:18:09,167:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:09,352:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T007S.tsv
2025-06-05 18:18:09,385:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:09,937:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T008D.tsv
2025-06-05 18:18:10,033:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:10,615:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T008S.tsv
2025-06-05 18:18:10,727:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:10,755:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T010D.tsv
2025-06-05 18:18:10,761:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:10,788:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T010S.tsv
2025-06-05 18:18:10,793:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:10,965:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T011D.tsv
2025-06-05 18:18:10,998:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:11,136:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T011S.tsv
2025-06-05 18:18:11,165:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:11,373:API_operations.exports.ForProject:INFO Row 20000 of max 69291
2025-06-05 18:18:11,452:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T012D.tsv
2025-06-05 18:18:11,505:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:11,647:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T012S.tsv
2025-06-05 18:18:11,675:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:12,206:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T013D.tsv
2025-06-05 18:18:12,307:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:12,735:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T013S.tsv
2025-06-05 18:18:12,817:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:13,602:API_operations.exports.ForProject:INFO Row 30000 of max 69291
2025-06-05 18:18:14,080:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T015D.tsv
2025-06-05 18:18:14,319:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:15,088:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T015S.tsv
2025-06-05 18:18:15,230:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:15,903:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T016D.tsv
2025-06-05 18:18:16,024:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:16,138:API_operations.exports.ForProject:INFO Row 40000 of max 69291
2025-06-05 18:18:16,706:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T016S.tsv
2025-06-05 18:18:16,833:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:16,956:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T017D.tsv
2025-06-05 18:18:16,979:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:16,992:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T017S.tsv
2025-06-05 18:18:16,995:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:17,041:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T018D.tsv
2025-06-05 18:18:17,050:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:17,063:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T018S.tsv
2025-06-05 18:18:17,066:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:17,469:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T019D.tsv
2025-06-05 18:18:17,543:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:17,857:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T019S.tsv
2025-06-05 18:18:17,918:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:18,404:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T020D.tsv
2025-06-05 18:18:18,499:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:18,535:API_operations.exports.ForProject:INFO Row 50000 of max 69291
2025-06-05 18:18:19,115:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T020S.tsv
2025-06-05 18:18:19,232:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:19,257:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T022D.tsv
2025-06-05 18:18:19,262:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:19,283:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T022S.tsv
2025-06-05 18:18:19,288:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:19,463:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T023D.tsv
2025-06-05 18:18:19,496:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:19,705:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T023S.tsv
2025-06-05 18:18:19,760:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:20,177:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T024D.tsv
2025-06-05 18:18:20,257:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:20,663:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T024S.tsv
2025-06-05 18:18:20,739:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:20,931:API_operations.exports.ForProject:INFO Row 60000 of max 69291
2025-06-05 18:18:21,205:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T025D.tsv
2025-06-05 18:18:21,290:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:21,859:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T025S.tsv
2025-06-05 18:18:21,979:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:22,156:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T027D.tsv
2025-06-05 18:18:22,189:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:22,379:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T027S.tsv
2025-06-05 18:18:22,415:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:22,957:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T028D.tsv
2025-06-05 18:18:23,060:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:23,143:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T028S.tsv
2025-06-05 18:18:23,159:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:23,197:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T029D.tsv
2025-06-05 18:18:23,205:API_operations.exports.ForProject:INFO Writing into temptask file data.tsv
2025-06-05 18:18:23,261:API_operations.exports.ForProject:INFO Storing into zip as ecotaxa_T029S.tsv
2025-06-05 18:18:23,263:API_operations.exports.ForProject:INFO Extracted 69291 rows
2025-06-05 18:18:23,264:API_operations.exports.ForProject:INFO Log in zip should end here.
